generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id              BigInt     @id @default(autoincrement()) @db.UnsignedBigInt
  name            String     @db.VarChar(10)
  email           String     @db.VarChar(64)
  password        String     @db.Char(60)
  army_type       String     @db.Char(10)
  army_rank       String     @db.Char(10)
  enlistment      DateTime   @db.Date
  discharge       DateTime   @db.Date
  todos           Todo[]
}

model Todo {
  id         BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId     BigInt   @db.UnsignedBigInt
  goal       String   @db.VarChar(50)
  duration   Int
  start      DateTime @default(now())
  end        DateTime @db.Date
  is_done    Boolean  @default(false)
  is_share   Boolean  @default(false)
  user       User     @relation(fields: [userId], references: [id])
  share      Share?
  tasks      Task[]

  @@index([userId], map: "Todo_userId_fkey")
}

model Task {
  id         BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  todoId     BigInt   @db.UnsignedBigInt
  content    String   @db.VarChar(50)
  datetime   DateTime @db.Date
  is_done    Boolean  @default(false)
  todo       Todo     @relation(fields: [todoId], references: [id])

  @@index([todoId], map: "Todo_todoId_fkey")
}

model Share {
  id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  todoId      BigInt   @unique @db.UnsignedBigInt
  title       String   @db.VarChar(50)
  description String   @db.VarChar(300)
  image       String   @db.Text
  hit         BigInt   @default(0) @db.UnsignedBigInt
  like        BigInt   @default(0) @db.UnsignedBigInt
  hash_tag    String   @db.VarChar(50)
  post_time   DateTime @default(now())
  todos       Todo     @relation(fields: [todoId], references: [id])
}
